function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function refresh(){window.location.reload()}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));let actionVillain,charData,villainData,scrollElem,propertiesValue=document.querySelector(".properties__amount"),propertiesAmount=20,villainSubmit=!1,blockAttackChar=0,blockAttackVillain=0;function propertiesDown(e){if(0!=propertiesAmount){let t=+document.querySelector(`.${e}__value`).innerHTML;if(0==t)return;document.querySelector(`.${e}__value`).innerHTML=t-1,propertiesAmount+=1,propertiesValue.innerHTML="Очки характеристик: "+propertiesAmount}}function propertiesUp(e){if(0!=propertiesAmount){let t=+document.querySelector(`.${e}__value`).innerHTML;document.querySelector(`.${e}__value`).innerHTML=t+1,propertiesAmount-=1,propertiesValue.innerHTML="Очки характеристик: "+propertiesAmount}}function propertiesSubmit(){if(0!=propertiesAmount)return;let e=document.querySelectorAll(".properties__button");for(let t=0;t<e.length;t++)e[t].style.display="none";if(document.querySelector(".properties__submit").style.display="none",0==propertiesAmount){let e=+document.querySelector(".health__value").innerHTML,t=+document.querySelector(".damage__value").innerHTML,a=+document.querySelector(".armour__value").innerHTML,l=+document.querySelector(".agility__value").innerHTML;charData={health:e,damage:t,armour:a,agility:l}}if(charData.health<=0){document.querySelector(".game-over").innerHTML="Game over",document.querySelector(".game-over").style.display="flex";let e=window.screen.height;document.querySelector(".game-over").style.height=e+"px",document.body.classList.add("active")}document.querySelector(".game__bar").style.display="flex"}function gameRow(e,t){document.querySelector(".fight__text").innerHTML+=`<p class="${t}">${e}</p>`}function block(){blockAttackChar=1,gameRow("Вы поставили блок","character"),villainAction(),0==actionVillain?villainBlock():villainAttack(),blockAttackChar=0,blockAttackVillain=0}function attack(){if(villainAction(),0==actionVillain)villainBlock(),1==blockAttackVillain&&gameRow("Противник заблокировал вашу атаку","villain");else{if(villainData.health<=0)document.querySelector(".game-over").innerHTML="You win",document.querySelector(".game-over").style.display="flex";else if(charData.damage<villainData.armour)gameRow("Вы не можете нанести противнику урон,защита противника непробиваема","character");else if(gameRow(`Вы нанесли ${charData.damage-villainData.armour} урона( Враг заблокировал ${villainData.armour} урона с помощью брони)`,"character"),villainData.health-=charData.damage-villainData.armour,villainData.health<=0){gameRow("Враг мертв","death"),document.querySelector(".game-over").innerHTML="You win",document.querySelector(".game-over").style.display="flex";let e=window.screen.height;document.querySelector(".game-over").style.height=e+"px",document.body.classList.add("active")}else gameRow(`У врага осталось ${villainData.health} здоровья`,"health");villainAttack()}blockAttackVillain=0}function villainAttack(){if(blockAttackChar)gameRow("Атака противника была заблокирована","villain");else if(villainData.damage<charData.armour)gameRow("Противник не может нанести Вам урон,Ваша защита непробиваема","villain");else if(gameRow(`Противник нанес вам ${villainData.damage-charData.armour} урона( Вы заблокировали ${charData.armour} урона с помощью брони)`,"villain"),charData.health-=villainData.damage-charData.armour,charData.health<=0){if(gameRow("Вы мертвы","death"),charData.health<=0){document.querySelector(".game-over").innerHTML="Game over",document.querySelector(".game-over").style.display="flex";let e=window.screen.height;document.querySelector(".game-over").style.height=e+"px",document.body.classList.add("active")}}else gameRow(`У вас осталось ${charData.health} здоровья`,"health")}function villainBlock(){blockAttackVillain=1,gameRow("Противник поставил блок","villain")}function villainAction(){return action=Math.round(1e4*+Math.random().toFixed(4)%10),action<=5?(console.log("Атака"),actionVillain=1):(console.log("Блок"),actionVillain=0)}propertiesValue.innerHTML="Очки характеристик: "+propertiesAmount,document.querySelectorAll(".villain__card").forEach(e=>{e.addEventListener("click",(function(e){e.preventDefault(),document.querySelectorAll(".villain__card").forEach(e=>{e.classList.remove("active")})})),e.addEventListener("click",(function(t){t.preventDefault(),0==villainSubmit&&(document.querySelectorAll(".card__properties").forEach(e=>e.classList.remove("active")),e.querySelector(".card__properties").classList.add("active")),this.classList.add("active")}))}),document.querySelector(".villain__submit").addEventListener("click",(function(e){let t=document.querySelector(".card__properties.active"),a=+t.querySelector(".villain__health").innerHTML,l=+t.querySelector(".villain__damage").innerHTML,i=+t.querySelector(".villain__armour").innerHTML,r=+t.querySelector(".villain__agility").innerHTML;return villainData={health:a,damage:l,armour:i,agility:r},document.querySelectorAll(".villain__card").forEach(e=>{null==e.querySelector(".card__properties.active")&&(e.querySelector(".card__disable").style.display="block")}),scrollElem=document.documentElement.clientHeight,this.style.display="none",document.querySelector(".game__action").style.display="flex",villainSubmit=!0})),window.onscroll=function(){window.pageYOffset>1457?document.querySelector(".fight__buttons").classList.add("fixed"):document.querySelector(".fight__buttons").classList.remove("fixed")};